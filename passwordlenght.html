<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Multi Password Strength Checker + Report</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    min-height: 100vh;
  }
  h1 {
    margin-bottom: 20px;
  }
  input[type="password"] {
    padding: 10px 15px;
    font-size: 18px;
    border-radius: 6px;
    border: none;
    width: 300px;
    margin-bottom: 15px;
  }
  button {
    padding: 12px 25px;
    font-size: 18px;
    border-radius: 6px;
    border: none;
    background-color: #007bff;
    color: white;
    cursor: pointer;
    margin: 5px;
  }
  button:hover {
    background-color: #0056b3;
  }
  .resultList {
    margin-top: 25px;
    max-width: 400px;
    width: 100%;
  }
  .resultItem {
    background: #222;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 10px;
  }
  .strong {
    color: #4CAF50;
  }
  .weak {
    color: #f44336;
  }
  .advice {
    margin-top: 8px;
    font-size: 14px;
    color: #ffc107;
  }
</style>
</head>
<body>

<h1>Multi Password Strength Checker</h1>

<input type="password" id="passwordInput" placeholder="Enter your password" />
<br />
<button onclick="checkPassword()">Check Password</button>
<button id="downloadBtn" onclick="downloadReport()" disabled>Download Report</button>

<div id="resultList" class="resultList"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const { jsPDF } = window.jspdf;

  const maxPasswords = 15;
  let passwordResults = [];

  function checkPassword() {
    const pwdInput = document.getElementById('passwordInput');
    const pwd = pwdInput.value.trim();

    if (!pwd) {
      alert('Please enter a password first!');
      return;
    }

    if (passwordResults.length >= maxPasswords) {
      alert(`You have already checked ${maxPasswords} passwords. Please download the report.`);
      return;
    }

    // Check password strength logic
    let strength = 0;
    let advice = [];

    if (pwd.length >= 8) strength++;
    else advice.push('Make your password at least 8 characters long.');

    if (/[A-Z]/.test(pwd)) strength++;
    else advice.push('Include at least one uppercase letter.');

    if (/[a-z]/.test(pwd)) strength++;
    else advice.push('Include at least one lowercase letter.');

    if (/\d/.test(pwd)) strength++;
    else advice.push('Include at least one number.');

    if (/[^A-Za-z0-9]/.test(pwd)) strength++;
    else advice.push('Include at least one special character (e.g. !, @, #, $).');

    let status = strength >= 4 ? 'Strong' : 'Weak';

    // Save the result for report
    passwordResults.push({
      password: pwd,
      status: status,
      advice: status === 'Weak' ? advice : ['Your password looks strong. Good job!']
    });

    // Show this password's result on the page
    addResultToPage(pwd, status, advice);

    pwdInput.value = ''; // clear input

    // Enable download button if at least 1 password checked
    document.getElementById('downloadBtn').disabled = false;

    // Auto-download report after maxPasswords reached
    if (passwordResults.length === maxPasswords) {
      alert(`Checked ${maxPasswords} passwords. Downloading report now...`);
      downloadReport();
    }
  }

  function addResultToPage(password, status, adviceList) {
    const container = document.getElementById('resultList');
    const div = document.createElement('div');
    div.className = 'resultItem';

    const statusClass = status === 'Strong' ? 'strong' : 'weak';

    div.innerHTML = `
      <div><strong>Password:</strong> ${password}</div>
      <div><strong>Status:</strong> <span class="${statusClass}">${status}</span></div>
      <div class="advice">${adviceList.map(a => 'â€¢ ' + a).join('<br>')}</div>
    `;

    container.prepend(div);
  }

  function downloadReport() {
    if (passwordResults.length === 0) {
      alert('No passwords checked yet!');
      return;
    }

    const doc = new jsPDF();
    doc.setFontSize(22);
    doc.text('Password Strength Report', 20, 20);

    doc.setFontSize(14);
    let y = 40;

    passwordResults.forEach((item, idx) => {
      if (y > 270) { // Add new page if running out of space
        doc.addPage();
        y = 20;
      }
      doc.setFont(undefined, 'bold');
      doc.text(`Password #${idx + 1}:`, 20, y);
      doc.setFont(undefined, 'normal');
      doc.text(`Value: ${item.password}`, 35, y + 8);
      doc.text(`Status: ${item.status}`, 35, y + 16);
      y += 30;

      if (item.advice.length > 0) {
        doc.text('Reason:', 35, y - 10);
        item.advice.forEach((line) => {
          if (y > 270) {
            doc.addPage();
            y = 20;
          }
          doc.text(`- ${line}`, 40, y);
          y += 10;
        });
        y += 10;
      }
    });

    doc.save('Password_Strength_Summary_Report.pdf');
  }
</script>

</body>
</html>
